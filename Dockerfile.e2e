FROM node:10.19-alpine

WORKDIR /front-end/
COPY . .

RUN npm install -g @angular/cli@6.1.4
RUN npm install -g webdriver-manager
RUN npm i
RUN apk update && apk upgrade && \
    echo @edge http://nl.alpinelinux.org/alpine/edge/community >> /etc/apk/repositories && \
    echo @edge http://nl.alpinelinux.org/alpine/edge/main >> /etc/apk/repositories && \
    apk add --no-cache bash chromium@edge nss@edge && \
    webdriver-manager update --versions.chrome=73.0.3683.86 && \
    webdriver-manager start

# This line is to tell karma-chrome-launcher where
# chromium was downloaded and installed to.
ENV CHROME_BIN /usr/bin/chromium-browser

# Tell Puppeteer to skip installing Chrome.
# We'll be using the installed package instead.
ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD true
